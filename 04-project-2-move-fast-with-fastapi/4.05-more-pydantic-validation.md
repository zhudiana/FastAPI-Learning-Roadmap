## More Pydantics Validation

We haven't added a validation to the movie's id yet. ID should be unique and we shouldn't be able to give id for a movie. Therefore, in order to add an id automatically that is greater than the last id by 1, we will add the following python function in our project.

```python
def find_movie_id(movie: Movie):
    if (len(MOVIES) > 0):                # If we have movie in our MOVIE list
        movie.id = MOVIES[-1].id + 1     # add 1 to the last movie id
    else:
        movie.id = 1                    # If not, set the id to 1

    return movie
```

The `find_movie_id()` function will create id for us so whatever id you have in the request body, it will overwrite it by giving the id greater than the last movie id by 1. To make this functionality work, we need to use this function inside our post request as follows:

```python
@get.post("/create-movie")
def create_movie(movie_request: MovieRequest):
    new_movie = Movie(**movie_request.model_dump())
    MOVIES.append(find_movie_id(new_movie))    # We need to use the function here and pass the new_movie
```

Now, as a professional python developers, we want to minimize our line of code as much and as efficient as possible. So, let's rewrite our `find_movie_id()` function.

```python
def find_movie_id(movie: Movie):
    movie.id = 1 if len(MOVIES[-1] == 0) else MOVIES[-1].id + 1  # works similarly as before
    return movie
```

The last thing we are going to do is, make the movie `id` optional. What I meant by optional is, in our current model, if you don't include `id` in request body when you add new movie, it will raise an error. We don't want that. We want `id` to be added automatically when we add new movie. Therefore, change `id` in the model as follows:

```python
from typing import Optional

class MovieRequest(BaseModel):
    id: Optional[int] = None        # id can be an integer or of type None(Null)
    title: str = Field(min_length=3)
    director: str = Field(min_length=1)
    genre: str = Field(min_length=1, max_length=5)
    rating: int = Field(gt=0, lt=5)
```

The following JSON works perfectly in the request body without an id.

```JSON
{
    "title": "The truman show",
    "director": "Peter Weir",
    "genre": "Comedy Drama",
    "rating": 4.8
}
```
