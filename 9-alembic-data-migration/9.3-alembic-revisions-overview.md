## Alembic Revision, Upgrade & Downgrade

### Alembic Revision

- A **revision** is how we create a new Alembic file to add some type of database upgrade.
- Example:

  ```bash
  alembic revision -m "create phone number col on users table"
  ```

- This creates a new file where we can write the upgrade code.
- Each new revision has a unique **Revision ID**.

### Alembic Upgrade

- **Upgrade** is how we apply the migration.

```python
def upgrade() -> None:
    op.add_column('users', sa.Column('phone_number', sa.String(), nullable=True))
```

- Enhances the database to add a new column `phone_number` to the `users` table.
- Existing data is not changed.

### Alembic Upgrade (Run)

- To run the upgrade migration:

  ```bash
  alembic upgrade <revision id>
  ```

- This applies the changes inside the upgrade function.

### Alembic Downgrade

- **Downgrade** is how we revert a migration.

```python
def downgrade() -> None:
    op.drop_column('users', 'phone_number')
```

- Removes the last migration change.
- Existing data is not touched (except the column being dropped).

### Alembic Downgrade (Run)

- To run the downgrade migration:

  ```bash
  alembic downgrade -1
  ```

- Reverts the last migration applied.

With this flow, you can move **forward (upgrade)** or **backward (downgrade)** through your database schema history.
