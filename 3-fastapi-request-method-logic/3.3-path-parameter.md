## Path and Query Parameters

### 1. Path Parameters

**Path parameters** are variables that are part of the URL path itself. They allow you to capture values directly from the URL.

Example URL:

> `https://jsonplaceholder.typicode.com/posts/5`

**From the URL, we have:**

- **Base URL**: `https://jsonplaceholder.typicode.com`
- **Path**: `/posts/{id}`
- **Path parameter**: `id`
- **Path parameter value**: `5`

In FastAPI, we declare path parameters using curly braces `{}` in the route path, which makes that part of the path _dynamic_.

> By dynamic, we mean that we can change the value in that part of the URL, and FastAPI will capture it and pass it to our function.

```python
@app.get("/movies/{title}")       # title is the dynamic parameter
def read_movie(title):
    return {"Movie title": title}
```

If you run this example and go to http://127.0.0.1:8000/movies/parasite, youâ€™ll see:

```json
{ "Movie title": "parasite" }
```

Here, `parasite` is the dynamic parameter value passed to the function read_movie() as the argument `title`.

### Order of Endpoint Declaration in FastAPI

In FastAPI, the **order of route declarations matters** when using path parameters.

For example:

```python
@app.get("/movies/{dynamic_param}")
def read_all_movies(dynamic_param: str):
    return {"movie title": dynamic_param}

@app.get("/movies/mymovie")
def read_favorite_movie():
    return {"movie title": "My favorite movie"}
```

If we visit:
http://127.0.0.1:8000/movies/mymovie

The first route (`/movies/{dynamic_param}`) matches first, so "mymovie" is treated as the dynamic parameter.

Result:

```JSON
{
  "movie title": "mymovie"
}
```

The second route (`/movies/mymovie`) will never be reached because the dynamic one already captured the request.

---

When we type a request that needs a space, we are going to use `%20` instead of the space.

> URL: `http://127.0.0.1:8000/movies/The%20Godfather`

```python
@app.get("/movies/{title}")
def read_movie(title):
    for movie in MOVIES:
      if movie.get('title').casefold() == title.casefold():
        return movie
```

> `casefold()` is is similar to the lower() method, but the casefold() method is stronger, more aggressive.

**RESPONSE**:

```JSON
{
  "title":"The Godfather",
  "director":"Francis Ford Coppola",
  "genre":"Crime"
}
```

## Path Parameters with Type Hints

We can define the type of the path parameter in the function using Python type hints. FastAPI will:

- Convert the parameter to the specified type.

- Validate the value before calling the function.

```python
@app.get("/movies/{title}")
def read_movie(title: str): # type is declared here
    for movie in MOVIES:
      if movie.get('title').casefold() == title.casefold():
        return movie
```

We are setting the path parameter `title` to be a string type. The validation is handled by _Pydantic_.
