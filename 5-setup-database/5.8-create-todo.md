## Creating a New To-Do

In this section, we’ll build a **POST endpoint** that allows us to create new todos and store them in our database.

```python
from pydantic import BaseModel, Field
from fastapi import status

# Request model for creating a new todo
class TodoRequest(BaseModel):
    title: str = Field(min_length=3)
    description: str = Field(min_length=3, max_length=100)
    priority: int = Field(gt=0, lt=6)
    complete: bool

@app.post("/todo", status_code=status.HTTP_201_CREATED)
def create_todo(db: db_dependency, todo_request: TodoRequest):
    todo_model = Todos(**todo_request.model_dump())

    db.add(todo_model)
    db.commit()
```

### 1. The `TodoRequest` Model

We created a **Pydantic model** called `TodoRequest`.
This model defines the structure and validation rules for the data we expect when creating a new todo.

Note: We don’t include `id` here because the database automatically generates it as the **primary key**.

### 2. The POST Endpoint

```python
@app.post("/todo", status_code=status.HTTP_201_CREATED)
```

- Defines a **POST** endpoint at `/todo`.
- `status_code=status.HTTP_201_CREATED` → tells Swagger UI (and clients) that this endpoint **creates a new resource**.

### 3. The `create_todo` Function

```python
def create_todo(db: db_dependency, todo_request: TodoRequest):
```

- **`db: db_dependency`** → injects a database session using our dependency injection.
- **`todo_request: TodoRequest`** → FastAPI automatically validates the incoming JSON request against our Pydantic model.

### 4. Converting the Pydantic Model into a DB Object

```python
todo_model = Todos(**todo_request.model_dump())
```

- `todo_request.model_dump()` → converts the Pydantic model into a dictionary.
- `Todos(**data)` → unpacks the dictionary into keyword arguments to create a `Todos` object (our database model).

### 5. Adding and Committing to the Database

```python
db.add(todo_model)
db.commit()
```

- `db.add(todo_model)` → prepares the new todo to be inserted into the database.
- `db.commit()` → finalizes the transaction and saves the todo.
