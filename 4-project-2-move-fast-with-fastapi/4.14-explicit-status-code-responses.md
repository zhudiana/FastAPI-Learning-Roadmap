## Explicit Status Code Responses

So far, we have everything returning a 200 if fastapi application was a success. But we can add a little bit more detail than a normal 200 on everything.

- Import `starlette` at the top of our project. FastAPI is built with `starlette` so `starlette` will be installed automatically when you install fastapi.

- What we can do is we can dictate exactly what status response is returned after each successful API endpoints.

```python
from starlette import status

@app.get("/movies", status_code=status.HTTP_200_OK)
def read_all_movies():
    return MOVIES


@app.get("/movies/{movie_id}", status_code=status.HTTP_200_OK)
def read_movie(movie_id: int = Path(gt=0)):
    for movie in MOVIES:
        if movie.id == movie_id:
            return movie
    raise HTTPException(status_code=404, detail="Movie not found")


@app.get("/movies/", status_code=status.HTTP_200_OK)
def read_movie_by_rating(movie_rating: float = Query(gt=0, lt=6)):
    movies_to_return = []
    for movie in MOVIES:
        if movie.rating == movie_rating:
            movies_to_return.append(movie)
    return movies_to_return


@app.get("/movies/released_year/", status_code=status.HTTP_200_OK)
def read_movie_by_released_year(released_date: int = Query(gt=1980, lt=2025)):
    movie_to_return = []
    for movie in MOVIES:
        if movie.released_year == released_date:
            movie_to_return.append(movie)
    return movie_to_return


@app.post("/create-movie", status_code=status.HTTP_201_CREATED)
def create_movie(movie_request: MovieRequest):
    new_movie = Movie(**movie_request.model_dump())
    MOVIES.append(find_movie_id(new_movie))


def find_movie_id(movie: Movie):
    movie.id = 1 if len(MOVIES) == 0 else MOVIES[-1].id + 1
    return movie


@app.put("/movies/update-movies", status_code=status.HTTP_204_NO_CONTENT)
def update_movies(movies: MovieRequest):
    movie_changed = False
    for i in range(len(MOVIES)):
        if MOVIES[i].id == movies.id:
            MOVIES[i]= movies
            movie_changed = True
    if not movie_changed:
        raise HTTPException(status_code = 404, detail="Movie not found")


@app.delete("/movies/{movie_id}", status_code=status.HTTP_204_NO_CONTENT)
def delete_movies(movie_id: int):
    movie_deleted = False
    for i in range(len(MOVIES)):
        if MOVIES[i].id == movie_id:
            MOVIES.pop(i)
            movie_deleted = True
            break
    if not movie_deleted:
        raise HTTPException(status_code=404, detail="Movie not found")
```

We have successfully added an explicit status code to each api endpoints.
