## HTTP Exceptions

Now we have seen the status codes, let's get back to our Movie 2 project and HTTP exceptions in our endpoints.

- The first endpoint we are going to implement HTTP exception on is our get movie by id endpoint. We want to raise a 404 HTTP exception when a movie with the specified id is not found.

  - If you pass an id of 3000 before adding http exception, our endpoint will loop through MOVIES and and try to find the movie with that id. If not found, nothing happens.

```python
from fastapi import HTTPException

@app.get("/movies/{movie_id}")
def read_movie(movie_id: int = Path(gt=0)):
    for movie in MOVIES:
        if movie.id == movie_id:
            return movie
    raise HTTPException(status_code=404, detail="Movie not found")
    # Now, passing an id of 3000 will raise an exception.
```

- `update_movies` is the next endpoint we will implement HTTP exception on. In the same manner, if the movie with the id is not found, we will raise an exception.

```python
@app.put("/movies/update-movies")
def update_movies(movies: MovieRequest):
    movie_changed = False
    for i in range(len(MOVIES)):
        if MOVIES[i].id == movies.id:
            MOVIES[i]= movies
            movie_changed = True
    if not movie_changed:
        raise HTTPException(status_code=404, detail="Movie not found")

```

- Let's add HTTP Exception in the delete_movies endpoint as well.

```python
@app.delete("/movies/{movie_id}")
def delete_movies(movie_id: int):
    movie_deleted = False
    for i in range(len(MOVIES)):
        if MOVIES[i].id == movie_id:
            MOVIES.pop(i)
            movie_deleted = True
            break
    if not movie_deleted:
        raise HTTPException(status_code=404, detail="Movie not found")
```
