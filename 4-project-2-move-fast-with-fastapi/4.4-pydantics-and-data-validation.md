## Pydantics and Data Validation

- `Pydantics` is a python library that is used for data modeling, data parsing and has efficient error handling.

- It is commonly used for data validation and how to handle data coming to our FastAPI application.

We will be implementing Pydantics into our project by:

- creating a different request model for data validation.

- adding a `Field` data validation on each variable/element.

```python
class MovieRequest(BaseModel):
    id: int
    title: str = Field(min_length=10)
    director: str = Field(min_length=15)
    genre: str = Field(min_length=1, max_length=10)
    rating: int = Field(gt=-1, lt=6)    # gt=greater than  lt=less than
```

In the above example, you can see that we used `BaseModel`. `BaseModel` is the _pydantics model_ which gives us more functionality on data validation. Therefore, `MovieRequest` is a _pydantics model request_.

- We will convert this pydantics request model into a Movie.

```python
@app.post("/create-movie")
def create_movie(movie_request: MovieRequest):
    new_movie = Movie(**movie_request.model_dump())
    MOVIES.append(new_movie)
```

We used `MovieRequest`, our pydantics model, into our post request when we are setting `movie_request`'s type as `MovieRequest` model. We now have a mix of our `Movie` model and `movie_request` model. We want there to only be our `Movie` model inside. To solve that problem, we have to convert the `MovieRequest` to `Movie` object. The following line of code does that:

```python
    new_movie = Movie(**movie_request.model_dump())
    print(type(new_movie))          # <class 'movies2.Movie'>
```

> The `**` operator in the `Movie()` will pass the key-value from `MovieRequest()` to `Movie()` constructor (`__init__()`).

`Movie(**movie_request.model_dump())` : We are just converting the request to Movie object.

So far, our Movie project 2 looks like the following:

```python
from fastapi import FastAPI
from pydantic import BaseModel, Field

app = FastAPI()


class Movie:
    id: int
    title: str
    director: str
    genre: str
    rating: int

    def __init__(self, id, title, director, genre, rating):
        self.id = id
        self.title = title
        self.director = director
        self.genre = genre
        self.rating = rating


class MovieRequest(BaseModel):
    id: int
    title: str = Field(min_length=10)
    director: str = Field(min_length=15)
    genre: str = Field(min_length=1, max_length=10)
    rating: int = Field(gt=-1, lt=6)


MOVIES = [
    Movie(1, 'Inception', 'Christopher Nolan', 'Sci-Fi', 4.8),
    Movie(2, 'The Godfather', 'Francis Ford Coppola', 'Crime', 4.7),
    Movie(3, 'Spirited Away', 'Hayao Miyazaki', 'Animation', 4.8),
    Movie(4, 'Parasite', 'Bong Joon-ho', 'Thriller', 4.8),
    Movie(5, 'Pulp Fiction', 'Quentin Tarantino', 'Drama', 4.5),
]

@app.get("/movies")
def read_all_movies():
    return MOVIES

@app.post("/create-movie")
def create_movie(movie_request: MovieRequest):
    new_movie = Movie(**movie_request.model_dump())
    MOVIES.append(new_movie)
```

We will add more validations in the next section.
