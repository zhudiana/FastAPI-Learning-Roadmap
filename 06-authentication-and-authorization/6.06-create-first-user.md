## Create First User

In this section, we’ll add an endpoint to **create a user**. We’ll define a Pydantic model to validate the incoming request, then build a `Users` ORM object from it.

### Code (in `routers/auth.py`)

```python
from fastapi import APIRouter
from pydantic import BaseModel

from models import Users

router = APIRouter()

class CreateUserRequest(BaseModel):
    username: str
    email: str
    first_name: str
    last_name: str
    password: str
    role: str


@router.post("/auth/")
def create_user(create_user_request: CreateUserRequest):
    create_user_model = Users(
        email=create_user_request.email,
        username=create_user_request.username,
        first_name=create_user_request.first_name,
        last_name=create_user_request.last_name,
        role=create_user_request.role,
        hashed_password=create_user_request.password,
        is_active=True
    )
    return create_user_model
```

- **`CreateUserRequest` (Pydantic model)**: Validates the request body. It requires `username`, `email`, `first_name`, `last_name`, `password`, and `role`.

- **`create_user(...)`**:

  - Receives a validated `CreateUserRequest`.
  - Builds a `Users` ORM object (`create_user_model`) by mapping fields from the request to the model.
  - Sets `is_active=True` by default.
  - Returns the created ORM object.

> Note: At this stage we’re just **constructing and returning** a `Users` object. We are **not yet saving it to the database** and we’re also **not hashing the password** (we’re assigning the raw password to `hashed_password`). We’ll address persistence and password hashing in upcoming sections.

---

### Testing in Swagger UI

Send a POST request to **`/auth/`** with a JSON body like:

```json
{
  "username": "yodi",
  "email": "yodi@example.com",
  "first_name": "Yodit",
  "last_name": "K",
  "password": "secret123",
  "role": "user"
}
```

You should see a JSON representation of the user object returned.
