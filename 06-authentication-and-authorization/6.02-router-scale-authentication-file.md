## Router-Scoped Authentication File

In the previous section, we created an `auth.py` file for authentication, but it was running as a **separate FastAPI application**. To keep everything organized and still run **all endpoints under one app**, we’ll use **APIRouter**.

### Step 1: Create a Routers Package

Inside your project folder (`TodoApp`), create a new package called `routers`.

> Make sure you add `__init__.py` file inside TodoApp.

So your structure will look like this:

```
TodoApp/
│── main.py
│── models.py
│── database.py
│── routers/
│    ├── __init__.py
│    └── auth.py
```

### Step 2: Update `auth.py`

Now that we moved `auth.py` into the `routers` folder, update its code:

```python
from fastapi import APIRouter

router = APIRouter()

@router.get("/auth/")
def get_user():
    return {"user": "authenticated"}
```

- Instead of creating a new `FastAPI()` instance, we create a **router** using `APIRouter()`.
- This allows us to include these routes inside our main application.

### Step 3: Update `main.py`

Inside `main.py`, import and include the router:

```python
from routers import auth

app.include_router(auth.router)
```

- `from routers import auth` → imports the router we defined in `routers/auth.py`.
- `app.include_router(auth.router)` → tells FastAPI to include these routes inside the main application.

Now if you run `main.py`, you’ll see the `/auth/` endpoint **together with all your CRUD endpoints** in the Swagger UI.

### Why Use APIRouter?

- Keeps your project organized by separating logic into different files.
- Allows you to **scale your application** as it grows (e.g., `auth.py`, `users.py`, `todos.py`).
- All routers can be included into the main app, so you still have **one unified FastAPI application**.
